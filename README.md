# Платформа анализа тональности книжных отзывов

Это веб-приложение Django для анализа тональности пользовательских отзывов о книгах. Платформа позволяет пользователям просматривать, добавлять, редактировать и удалять книги и отзывы, а также предоставляет статистику и визуализацию тональности отзывов.

## Функционал

*   **Управление книгами:** Просмотр списка книг, деталей книги, добавление, редактирование и удаление книг.
*   **Управление отзывами:** Просмотр списка отзывов, добавление новых отзывов к книгам и их удаление.
*   **Анализ тональности:** Автоматический анализ тональности каждого отзыва (положительный, отрицательный, нейтральный) с использованием модели машинного обучения.
*   **Дэшборд:** Главная страница с ключевыми показателями: общее количество книг, общее количество отзывов, распределение тональности отзывов (визуализируется в виде круговой диаграммы).
*   **Регистрация и авторизация:** Пользователи могут регистрироваться и входить в систему.
*   **Профили пользователей:** Возможность редактирования профиля пользователя.
*   **Загрузка данных:** Загрузка данных о книгах из CSV-файлов.
*   **Фильтрация:** Фильтрация книг и отзывов по различным параметрам (например, по автору, заголовку, категории, тональности).
*   **Роли пользователей:** Поддержка ролей "пользователь" и "администратор" с соответствующими правами доступа.

## Используемые технологии

*   **Бэкенд:** Python, Django
*   **Обработка данных:** pandas
*   **Машинное обучение:** scikit-learn, Hugging Face Transformers (nlptown/bert-base-multilingual-uncased-sentiment)
*   **База данных:** MySQL (настройки для PythonAnywhere)
*   **Визуализация:** Matplotlib (для графиков в браузере)
*   **Управление статическими файлами:** Whitenoise

## Настройка и запуск проекта

Следуйте этим инструкциям для локальной настройки и запуска проекта.

### Предварительные требования

*   Python 3.8+
*   pip (менеджер пакетов Python)

### Установка зависимостей

1.  **Перейдите в корневую директорию проекта `sentiment_platform`:**
    ```bash
    cd sentiment_platform
    ```

2.  **Установите зависимости из `requirements.txt`:**
    ```bash
    pip install -r requirements.txt
    ```

### Настройка базы данных и моделей

Для упрощения запуска, в проекте предусмотрен скрипт `run.py`, который автоматизирует основные шаги: выполнение миграций, создание суперпользователя (по запросу), обучение модели и заполнение базы данных примерами.

1.  **Запустите скрипт `run.py`:**
    ```bash
    python run.py
    ```
    Скрипт последовательно выполнит следующие действия:
    *   **Миграции:** Применит все необходимые миграции базы данных.
    *   **Создание суперпользователя:** Запросит, хотите ли вы создать суперпользователя. Если да, вам будет предложено ввести имя пользователя и email. Пароль будет запрошен Django автоматически.
    *   **Обучение модели:** Запустит скрипт `train_model.py` для обучения модели анализа тональности и сохранения её в файл.
    *   **Инициализация базы данных:** Запросит, хотите ли вы заполнить базу данных примерами данных (книги и отзывы).
    *   **Запуск сервера:** Запустит локальный сервер разработки Django.

### Ручная настройка (альтернативный вариант)

Если вы предпочитаете выполнять шаги вручную:

1.  **Перейдите в корневую директорию проекта `sentiment_platform`:**
    ```bash
    cd sentiment_platform
    ```

2.  **Примените миграции базы данных:**
    ```bash
    python manage.py migrate
    ```

3.  **Создайте суперпользователя (по желанию):**
    ```bash
    python manage.py createsuperuser
    ```
    Следуйте инструкциям в терминале для ввода имени пользователя, email и пароля.

4.  **Обучите модель анализа тональности:**
    ```bash
    python train_model.py
    ```
    Этот скрипт обучит модель и сохранит `sentiment_model.pkl` и `vectorizer.pkl` в папку `models/`.

5.  **Заполните базу данных примерами данных (по желанию):**
    ```bash
    python manage.py loaddata sample_reviews.json
    # или используйте initialize_db.py для более сложных сценариев
    python initialize_db.py
    ```

### Запуск приложения

После выполнения всех шагов по настройке, запустите сервер разработки Django:

```bash
python manage.py runserver
```

Приложение будет доступно по адресу `http://127.0.0.1:8000/`.

## Использование

*   **Главная страница:** Отображает общую статистику и графики тональности.
*   **Книги:** Добавляйте новые книги, просматривайте существующие, редактируйте или удаляйте их.
*   **Отзывы:** Оставляйте отзывы к книгам. Система автоматически проанализирует тональность.
*   **Профиль:** Обновляйте информацию о своем профиле.
*   **Загрузка CSV:** Используйте страницу `/upload-csv/` для массовой загрузки данных о книгах.

---
